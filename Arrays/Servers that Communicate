/*
====================================================
LeetCode Problem: Count Servers that Communicate
Link:
https://leetcode.com/problems/count-servers-that-communicate/

----------------------------------------------------
Problem Statement:
You are given an m x n grid where:
- grid[i][j] == 1 represents a server
- grid[i][j] == 0 represents an empty cell

Two servers can communicate if:
- They are in the same row OR
- They are in the same column

Return the number of servers that can communicate
with at least one other server.

----------------------------------------------------
Approach:
1. Traverse the grid and count:
   - Number of servers in each row
   - Number of servers in each column
2. Traverse the grid again:
   - If a cell contains a server AND
   - Either its row count > 1 OR column count > 1
   → Count it as a communicating server

----------------------------------------------------
Why this works:
- A server communicates if there's at least one
  more server in the same row or column.
- Pre-counting rows and columns avoids repeated scans.

----------------------------------------------------
Time Complexity:
O(m × n)

Space Complexity:
O(m + n)

----------------------------------------------------
Author: Saurabh Singh
====================================================
*/

#include <bits/stdc++.h>
using namespace std;

class Solution {
public:
    int countServers(vector<vector<int>>& grid) {

        int m = grid.size();
        int n = grid[0].size();

        vector<int> rowCount(m, 0);
        vector<int> colCount(n, 0);

        // First pass: count servers in each row and column
        for (int i = 0; i < m; i++) {
            for (int j = 0; j < n; j++) {
                if (grid[i][j] == 1) {
                    rowCount[i]++;
                    colCount[j]++;
                }
            }
        }

        int result = 0;

        // Second pass: count communicating servers
        for (int i = 0; i < m; i++) {
            for (int j = 0; j < n; j++) {
                if (grid[i][j] == 1 &&
                   (rowCount[i] > 1 || colCount[j] > 1)) {
                    result++;
                }
            }
        }

        return result;
    }
};

/*
-------------------
Example:
Input:
grid = [[1,0],
        [1,1]]

Row counts: [1,2]
Col counts: [2,1]

Output:
3
-------------------
*/
